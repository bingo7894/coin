import{_ as H,a as R}from"./D6lpS-s0.js";import{_ as U,c as a,o as r,a as e,b as s,a4 as T,h as z,a5 as O,r as x,y as G,L as M,k as w,d as j,t as u,F as C,V as I,U as X,n as q}from"./Dj3teEM2.js";const J={},K={class:"bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-2xl shadow-xl border border-yellow-200"},Q={class:"flex items-center space-x-2 mb-4"},W={class:"space-y-2 text-sm text-yellow-700"},Y={class:"flex items-start space-x-2"},Z={class:"flex items-start space-x-2"},ee={class:"flex items-start space-x-2"},te={class:"flex items-start space-x-2"};function se(V,o){const c=T;return r(),a("section",K,[e("div",Q,[s(c,{name:"lucide:lightbulb",class:"w-5 h-5 text-yellow-600"}),o[0]||(o[0]=e("h2",{class:"font-semibold text-yellow-800"},"เคล็ดลับการถ่ายภาพ",-1))]),e("ul",W,[e("li",Y,[s(c,{name:"lucide:check",class:"w-4 h-4 mt-0.5 text-yellow-600"}),o[1]||(o[1]=e("span",null,"วางเหรียญบนพื้นผิวเรียบ สีขาวหรือสีอ่อน",-1))]),e("li",Z,[s(c,{name:"lucide:check",class:"w-4 h-4 mt-0.5 text-yellow-600"}),o[2]||(o[2]=e("span",null,"ใช้แสงธรรมชาติหรือแสงที่เพียงพอ",-1))]),e("li",ee,[s(c,{name:"lucide:check",class:"w-4 h-4 mt-0.5 text-yellow-600"}),o[3]||(o[3]=e("span",null,"ถ่ายจากด้านบนในระยะใกล้พอสมควร",-1))]),e("li",te,[s(c,{name:"lucide:check",class:"w-4 h-4 mt-0.5 text-yellow-600"}),o[4]||(o[4]=e("span",null,"หลีกเลี่ยงเงาและแสงสะท้อน",-1))])])])}const le=U(J,[["render",se]]),oe={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col"},ne={class:"flex-1 p-6"},ae={class:"max-w-lg w-full mx-auto space-y-8"},re={class:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100 hover:shadow-2xl transition-shadow duration-300"},ie={class:"flex items-center space-x-2 mb-6"},de={class:"grid grid-cols-2 gap-4"},ce={class:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center mb-3 group-hover:bg-blue-600 transition-colors"},ue={class:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center mb-3 group-hover:bg-purple-600 transition-colors"},me={key:0,class:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100"},pe={class:"flex items-center justify-between mb-6"},xe={class:"flex items-center space-x-2"},be={class:"relative rounded-xl overflow-hidden"},ge=["src"],ve={class:"mt-6 flex gap-4"},fe=["disabled"],he={key:0,class:"flex items-center justify-center"},_e={key:1,class:"flex items-center justify-center"},ye={key:1,class:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100"},we={class:"flex items-center space-x-2 mb-4"},ke={class:"rounded-xl overflow-hidden"},je=["src"],Ce={key:2,class:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100"},Ie={class:"flex items-center space-x-2 mb-6"},$e={class:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200"},Se={class:"text-center"},Fe={class:"text-4xl font-bold text-green-600 mb-2"},Ee={class:"text-2xl font-semibold text-green-800 mt-4"},Te={key:0,class:"mt-6"},Ve={class:"grid grid-cols-2 gap-3"},Be={class:"flex items-center justify-between"},Ne={class:"text-gray-700"},Pe={class:"font-semibold text-gray-900"},Ae={class:"text-sm text-gray-500 mt-1"},De={class:"bg-white p-6 rounded-2xl shadow-xl border border-gray-100"},Le={class:"flex items-center justify-between mb-6"},He={class:"flex items-center space-x-2"},Re={class:"relative"},Ue={class:"relative overflow-hidden rounded-xl bg-gray-100 aspect-video"},ze=["src","alt"],Oe={class:"absolute bottom-4 left-4 text-white"},Ge={class:"font-semibold"},Me={class:"text-sm opacity-90"},Xe={class:"absolute bottom-4 right-4 flex space-x-2"},qe=["onClick"],Je={class:"mt-4 text-center"},Ke={class:"text-sm text-gray-600"},Qe={class:"text-blue-600"},et=z({__name:"index",setup(V){O();const o=x(null),c=x(null),v=x(null),f=x(null),h=x(!1),d=x(null),B=()=>{var n;return(n=o.value)==null?void 0:n.click()},N=()=>{var n;return(n=c.value)==null?void 0:n.click()},$=n=>{var l;const p=(l=n.target.files)==null?void 0:l[0];if(p){f.value=p;const y=new FileReader;y.onload=k=>{var i;v.value=(i=k.target)==null?void 0:i.result,d.value=null},y.readAsDataURL(p)}},P=()=>{v.value=null,f.value=null,d.value=null,o.value&&(o.value.value=""),c.value&&(c.value.value="")},A=async()=>{if(f.value){h.value=!0;try{const n=new FormData;n.append("file",f.value);const t=await fetch("http://localhost:8000/api/process-image",{method:"POST",body:n});if(!t.ok)throw new Error("Error processing image");const p=await t.json();d.value=p;try{const l=await $fetch("/api/history",{method:"POST",body:p});console.log("History saved:",l)}catch(l){console.error("Failed to save history:",l)}}catch(n){console.error("processImage error:",n)}finally{h.value=!1}}},m=x(0),b=x([{image:"/images/coinEx1.jpg",title:"ตัวอย่างเหรียญ 1",description:"วิธีการถ่ายภาพที่ถูกต้อง"},{image:"/images/coinEx2.jpg",title:"ตัวอย่างเหรียญ 2",description:"มุมมองและแสงที่เหมาะสม"}]);let _=null;const S=()=>{m.value=(m.value+1)%b.value.length},D=()=>{m.value=(m.value-1+b.value.length)%b.value.length},L=n=>{m.value=n,E(),setTimeout(F,1e3)},F=()=>{_=window.setInterval(S,4e3)},E=()=>{_!==null&&(clearInterval(_),_=null)};return G(()=>{F()}),M(()=>{E()}),(n,t)=>{const p=H,l=T,y=le,k=R;return r(),a("div",oe,[s(p),e("main",ne,[e("div",ae,[e("section",re,[e("div",ie,[s(l,{name:"lucide:image-plus",class:"w-5 h-5 text-blue-600"}),t[0]||(t[0]=e("h2",{class:"font-semibold text-gray-800"},"ใช้ภาพจากไหนดี ?",-1))]),e("div",de,[e("button",{onClick:B,class:"group flex flex-col items-center justify-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border-2 border-blue-200 hover:border-blue-400 hover:from-blue-100 hover:to-blue-200 transition-all duration-300 transform hover:scale-105"},[e("div",ce,[s(l,{name:"lucide:camera",class:"w-6 h-6 text-white"})]),t[1]||(t[1]=e("span",{class:"font-medium text-blue-700"},"กล้อง",-1)),t[2]||(t[2]=e("span",{class:"text-sm text-blue-500 mt-1"},"ถ่ายภาพใหม่",-1))]),e("button",{onClick:N,class:"group flex flex-col items-center justify-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border-2 border-purple-200 hover:border-purple-400 hover:from-purple-100 hover:to-purple-200 transition-all duration-300 transform hover:scale-105"},[e("div",ue,[s(l,{name:"lucide:folder-open",class:"w-6 h-6 text-white"})]),t[3]||(t[3]=e("span",{class:"font-medium text-purple-700"},"แกลเลอรี",-1)),t[4]||(t[4]=e("span",{class:"text-sm text-purple-500 mt-1"},"เลือกจากอัลบั้ม",-1))])])]),e("input",{ref_key:"cameraInput",ref:o,type:"file",accept:"image/*",capture:"environment",class:"hidden",onChange:$},null,544),e("input",{ref_key:"galleryInput",ref:c,type:"file",accept:"image/*",class:"hidden",onChange:$},null,544),v.value?(r(),a("section",me,[e("div",pe,[e("div",xe,[s(l,{name:"lucide:image",class:"w-5 h-5 text-green-600"}),t[5]||(t[5]=e("h2",{class:"font-semibold text-gray-800"},"ภาพที่เลือก",-1))]),e("button",{onClick:P,class:"text-red-500 hover:text-red-700 transition-colors"},[s(l,{name:"lucide:x",class:"w-5 h-5"})])]),e("div",be,[e("img",{src:v.value,alt:"Selected image",class:"w-full h-64 object-cover"},null,8,ge),t[6]||(t[6]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"},null,-1))]),e("div",ve,[e("button",{onClick:A,disabled:h.value,class:"flex-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-purple-600 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"},[h.value?(r(),a("span",he,[s(l,{name:"lucide:loader-2",class:"w-5 h-5 mr-2 animate-spin"}),t[7]||(t[7]=j(" กำลังประมวลผล... ",-1))])):(r(),a("span",_e,[s(l,{name:"lucide:search",class:"w-5 h-5 mr-2"}),t[8]||(t[8]=j(" นับเหรียญ ",-1))]))],8,fe)])])):w("",!0),d.value&&d.value.labeledImage?(r(),a("section",ye,[e("div",we,[s(l,{name:"lucide:scan",class:"w-5 h-5 text-blue-600"}),t[9]||(t[9]=e("h3",{class:"font-semibold text-gray-800"},"ภาพที่มีการตรวจจับ",-1))]),e("div",ke,[e("img",{src:d.value.labeledImage,alt:"Labeled Image",class:"w-full h-auto object-contain"},null,8,je)])])):w("",!0),d.value?(r(),a("section",Ce,[e("div",Ie,[s(l,{name:"lucide:trophy",class:"w-5 h-5 text-yellow-600"}),t[10]||(t[10]=e("h2",{class:"font-semibold text-gray-800"},"ผลลัพธ์",-1))]),e("div",$e,[e("div",Se,[e("div",Fe,u(d.value.count),1),t[11]||(t[11]=e("div",{class:"text-lg text-green-700"},"เหรียญที่พบ",-1)),e("div",Ee,u(d.value.totalValue)+" บาท ",1)])]),d.value.details&&d.value.details.length>0?(r(),a("div",Te,[t[12]||(t[12]=e("h3",{class:"font-semibold text-gray-800 mb-4"},"รายละเอียดเหรียญ:",-1)),e("div",Ve,[(r(!0),a(C,null,I(d.value.details,i=>(r(),a("div",{key:i.type,class:"bg-gray-50 p-4 rounded-xl"},[e("div",Be,[e("span",Ne,u(i.type),1),e("span",Pe,u(i.count),1)]),e("div",Ae,u(i.value)+" บาท ",1)]))),128))])])):w("",!0)])):w("",!0),e("section",De,[e("div",Le,[e("div",He,[s(l,{name:"lucide:image",class:"w-5 h-5 text-green-600"}),t[13]||(t[13]=e("h2",{class:"font-semibold text-gray-800"},"ภาพตัวอย่าง",-1))])]),e("section",null,[e("div",Re,[e("div",Ue,[e("div",{class:"flex transition-transform duration-500 ease-in-out h-full",style:X({transform:`translateX(-${m.value*100}%)`})},[(r(!0),a(C,null,I(b.value,(i,g)=>(r(),a("div",{key:g,class:"w-full flex-shrink-0 relative"},[e("img",{src:i.image,alt:i.title,class:"w-full h-full object-cover"},null,8,ze),t[14]||(t[14]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"},null,-1)),e("div",Oe,[e("h3",Ge,u(i.title),1),e("p",Me,u(i.description),1)])]))),128))],4),e("button",{onClick:D,class:"absolute left-2 top-1/2 -translate-y-1/2 w-8 h-8 bg-white/80 hover:bg-white rounded-full flex items-center justify-center shadow-lg transition-all duration-200 hover:scale-110"},t[15]||(t[15]=[e("span",{class:"text-gray-700 text-xl"},"<",-1)])),e("button",{onClick:S,class:"absolute right-2 top-1/2 -translate-y-1/2 w-8 h-8 bg-white/80 hover:bg-white rounded-full flex items-center justify-center shadow-lg transition-all duration-200 hover:scale-110"},t[16]||(t[16]=[e("span",{class:"text-gray-700 text-xl"},">",-1)])),e("div",Xe,[(r(!0),a(C,null,I(b.value,(i,g)=>(r(),a("button",{key:g,onClick:We=>L(g),class:q(["w-2 h-2 rounded-full transition-all duration-200",m.value===g?"bg-white":"bg-white/50"])},null,10,qe))),128))]),t[17]||(t[17]=e("div",{class:"absolute top-4 right-4 flex items-center space-x-2 bg-black/20 rounded-full px-3 py-1"},[e("span",{class:"text-white text-xs"},"Auto")],-1))]),e("div",Je,[e("p",Ke,[j(u(m.value+1)+" / "+u(b.value.length)+" - ",1),e("span",Qe,u(b.value[m.value].title),1)])])])])]),s(y),t[18]||(t[18]=e("div",{class:"p-6 rounded-2xl shadow-xl border border-gray-100"},null,-1))])]),s(k)])}}});export{et as default};
