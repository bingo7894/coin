import{_ as w,a as C}from"./CX95B2aT.js";import{h as V,a7 as N,r as $,g as B,c as n,b as r,a as t,k as T,a1 as s,t as d,w as L,F as j,V as D,a2 as b,e as F,o as a,a4 as S,d as A,a8 as H,a9 as I,J as M,aa as R}from"./BYeEcd1H.js";import{u as U}from"./CQugv8yJ.js";const z={class:"min-h-screen bg-gray-50"},E={class:"p-6"},J={class:"max-w-2xl mx-auto"},q={class:"flex items-center space-x-3 mb-6"},G={key:0,class:"mb-6 p-4 bg-blue-50 rounded-lg flex justify-between items-center"},K={class:"text-lg font-semibold text-blue-800"},O={class:"text-sm text-blue-700"},P={key:1,class:"text-center p-10"},Q={key:2,class:"bg-red-100 p-4 rounded-lg text-red-700"},W={key:3,class:"text-center p-10 border-2 border-dashed rounded-xl"},X={key:4,class:"space-y-4"},Y=["value"],Z=["onClick"],tt={class:"font-semibold text-gray-800"},et={class:"text-sm text-gray-500 mt-1"},st={class:"text-right"},ot={class:"text-lg font-bold text-green-600"},rt=V({__name:"index",async setup(nt){let x,p;const{data:c,pending:h,error:m}=([x,p]=N(()=>U("/api/history",{lazy:!0},"$4opcnaxUir")),x=await x,p(),x),o=$([]),v=B(()=>c.value?o.value.reduce((l,e)=>{const u=c.value.find(_=>_.id===e);return l+((u==null?void 0:u.totalValue)||0)},0):0),f=()=>{if(o.value.length===0)return;const l=o.value.join(",");b(`/report?ids=${l}`)};return(l,e)=>{const u=w,_=S,y=F,k=C;return a(),n("div",z,[r(u),t("main",E,[t("div",J,[t("div",q,[r(_,{name:"lucide:history",class:"w-7 h-7 text-blue-600"}),e[2]||(e[2]=t("h1",{class:"text-2xl font-bold text-gray-800"},"ประวัติการนับเหรียญ",-1))]),s(o).length>0?(a(),n("div",G,[t("div",null,[t("p",K," ยอดรวมที่เลือก: "+d(s(v))+" บาท ",1),t("p",O," เลือก "+d(s(o).length)+" รายการ ",1)]),t("button",{onClick:f,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"}," สร้างรายงาน ")])):T("",!0),s(h)?(a(),n("div",P,e[3]||(e[3]=[t("p",null,"กำลังโหลดประวัติ...",-1)]))):s(m)?(a(),n("div",Q,[t("p",null,"ไม่สามารถโหลดข้อมูลได้: "+d(s(m).message),1)])):!s(c)||s(c).length===0?(a(),n("div",W,[r(_,{name:"lucide:archive",class:"w-12 h-12 mx-auto text-gray-400"}),e[5]||(e[5]=t("h3",{class:"mt-4 text-lg font-medium text-gray-700"}," ยังไม่มีประวัติ ",-1)),e[6]||(e[6]=t("p",{class:"mt-1 text-sm text-gray-500"}," ลองนับเหรียญครั้งแรกของคุณดูสิ! ",-1)),r(y,{to:"/",class:"mt-4 inline-block bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"},{default:L(()=>e[4]||(e[4]=[A(" ไปที่หน้านับเหรียญ ")])),_:1,__:[4]})])):(a(),n("div",X,[(a(!0),n(j,null,D(s(c),i=>(a(),n("div",{key:i.id,class:"block bg-white p-5 rounded-xl shadow-md transition-all duration-300 border flex items-center space-x-4"},[H(t("input",{type:"checkbox",value:i.id,"onUpdate:modelValue":e[0]||(e[0]=g=>R(o)?o.value=g:null),class:"form-checkbox h-5 w-5 text-blue-600 rounded-md border-gray-300 focus:ring-blue-500",onClick:e[1]||(e[1]=M(()=>{},["stop"]))},null,8,Y),[[I,s(o)]]),t("div",{onClick:g=>("navigateTo"in l?l.navigateTo:s(b))(`/history/${i.id}`),class:"flex-grow flex items-center justify-between cursor-pointer"},[t("div",null,[t("p",tt," ตรวจพบ "+d(i.totalCount)+" เหรียญ ",1),t("p",et,d(new Date(i.createdAt).toLocaleString("th-TH")),1)]),t("div",st,[t("p",ot,d(i.totalValue)+" บาท ",1),r(_,{name:"lucide:chevron-right",class:"w-5 h-5 text-gray-400 inline-block"})])],8,Z)]))),128))]))]),e[7]||(e[7]=t("div",{class:"p-12"},null,-1))]),r(k)])}}});export{rt as default};
