import{h as x,r as c,u as L,c as q,a as A,a1 as t,n as F,U as J,o as M,aq as p}from"./Dj3teEM2.js";import{d as D,e as U}from"./DLqlWRaA.js";const W=["id","width","height","disableRemotePlayback"],G=x({__name:"CldVideoPlayer",props:{width:{},height:{},aspectRatio:{},aiHighlightsGraph:{type:Boolean},bigPlayButton:{type:[Boolean,String]},colors:{},controlBar:{},controls:{type:Boolean,default:!0},floatingWhenNotVisible:{},fluid:{type:Boolean},fontFace:{},hideContextMenu:{type:Boolean},interactionAreas:{},playbackRates:{},playlistWidget:{},posterOptions:{},showJumpControls:{type:Boolean},seekThumbnails:{type:Boolean},videoJS:{},autoPlay:{type:[String,Boolean],default:!1},autoplay:{type:[String,Boolean]},autoShowRecommendations:{type:Boolean},loop:{type:Boolean,default:!1},maxTries:{},muted:{type:Boolean,default:!1},pictureInPictureToggle:{type:Boolean},playedEventPercents:{},playedEventTimes:{},playsinline:{type:Boolean,default:!1},videoTimeout:{},withCredentials:{type:Boolean},chapters:{type:[Object,Boolean]},chaptersButton:{type:Boolean},preload:{},sourceTransformation:{},sourceTypes:{},textTracks:{},transformation:{},ads:{},analytics:{type:Boolean},allowUsageReport:{type:Boolean},cloudinaryAnalytics:{type:[Boolean,Object]},cname:{},privateCdn:{type:Boolean},queryParams:{},secureDistribution:{},language:{},languages:{},logo:{type:[Boolean,Object],default:!0},poster:{},src:{},quality:{default:"auto"},autoplayMode:{default:"always"},className:{},id:{},onDataLoad:{},onError:{},onMetadataLoad:{},onPause:{},onPlay:{},onEnded:{},playerRef:{},version:{default:"1.11.1"},videoRef:{},config:{},disableRemotePlayback:{type:Boolean}},setup(b,{expose:P}){const a=b,{className:y,height:u,id:R,onDataLoad:w,onError:E,onMetadataLoad:k,onPause:T,onPlay:C,onEnded:O,src:f,transformation:s,version:m,quality:N,width:h,config:$}=a,S=Array.isArray(s)?s:[s];let l=f;if(l.startsWith("http"))try{const e=D(f);typeof(e==null?void 0:e.publicId)=="string"&&(l=e==null?void 0:e.publicId)}catch(e){console.error(e)}S.unshift({quality:N});const v=c(),_=c(),n=a.videoRef||_,I=c(),i=a.playerRef||I,g=R||`player-${l.replace("/","-")}`;let r="cld-video-player cld-fluid";y&&(r=`${r} ${y}`);const d={error:E,loadeddata:w,loadedmetadata:k,pause:T,play:C,ended:O};function V(e){const o=d[e.type];typeof o=="function"&&o({player:i.value,video:n.value})}const j=()=>{if("cloudinary"in window){v.value=window.cloudinary;const e=U({...a,colors:a.colors||{},fontFace:a.fontFace||"",publicId:l,playedEventPercents:a.playedEventPercents||[25,50,75,100],playedEventTimes:a.playedEventTimes||[]},{cloud:{cloudName:p().public.cloudinary.cloudName},...p().public.cloudinary.cloud,...p().public.cloudinary.url,...$});i.value=v.value.videoPlayer(n.value,JSON.parse(JSON.stringify(e))),Object.keys(d).forEach(o=>{var B;typeof d[o]=="function"&&((B=i.value)==null||B.on(o,V))})}};return P({playerRef:i,videoRef:n}),L({script:[{id:`cloudinary-videoplayer-${g}`,src:`https://unpkg.com/cloudinary-video-player@${m}/dist/cld-video-player.min.js`,onload:j,onerror:e=>console.error(`Failed to load Cloudinary Video Player: ${e.message}`)}],link:[{href:`https://unpkg.com/cloudinary-video-player@${m||"1.11.1"}/dist/cld-video-player.min.css`,rel:"stylesheet"}]}),(e,o)=>(M(),q("div",{style:J({width:"100%",aspectRatio:`${t(h)} / ${t(u)}`})},[A("video",{id:t(g),ref_key:"videoRef",ref:n,class:F(t(r)),width:t(h),height:t(u),disableRemotePlayback:e.disableRemotePlayback},null,10,W)],4))}});export{G as default};
